<div class="admin-dashboard">
  <!-- Header cu titlu È™i buton logout -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Panou Administrator</h2>
    <button class="btn btn-outline-danger" (click)="logout()">Logout</button>
  </div>

  <!-- Selectarea limbii pentru administrare -->
  <div *ngIf="!selectedLanguageId" class="language-selection-admin">
    <h2>SelecteazÄƒ limba de administrat</h2>
    <p>Alege limba pentru care vrei sÄƒ gestionezi conÈ›inutul educaÈ›ional:</p>

    <div class="languages-admin-grid">
      <div *ngFor="let language of availableLanguages" class="language-admin-card-container">
        <div class="language-admin-card" (click)="selectLanguageForAdmin(language.id)">
          <div class="language-flag">{{language.flagEmoji}}</div>
          <h4>{{language.name}}</h4>
          <p>AdministreazÄƒ {{language.name}}</p>
        </div>
        <!-- Buton de È™tergere -->
        <button class="delete-language-btn"
                (click)="confirmDeleteLanguage(language)"
                title="È˜terge limba È™i tot conÈ›inutul">
          ğŸ—‘ï¸
        </button>
      </div>

      <div *ngIf="showDeleteConfirmation" class="modal-overlay" (click)="cancelDelete()">
        <div class="modal-content delete-modal" (click)="$event.stopPropagation()">
          <h3>Confirmare È˜tergere</h3>
          <div class="delete-warning">
            <p><strong>ATENÈšIE!</strong> EÈ™ti pe cale sÄƒ È™tergi limba:</p>
            <div class="language-to-delete">
              <span class="flag">{{languageToDelete?.flagEmoji}}</span>
              <span class="name">{{languageToDelete?.name}}</span>
            </div>
            <div class="warning-details">
              <p>AceastÄƒ acÈ›iune va È™terge <strong>DEFINITIV</strong>:</p>
              <ul>
                <li>âœ— Toate nivelurile pentru {{languageToDelete?.name}}</li>
                <li>âœ— Toate lecÈ›iile din aceastÄƒ limbÄƒ</li>
                <li>âœ— Toate exerciÈ›iile asociate</li>
                <li>âœ— Progresul utilizatorilor pentru aceastÄƒ limbÄƒ</li>
              </ul>
              <p class="final-warning">
                <strong>AceastÄƒ acÈ›iune NU poate fi anulatÄƒ!</strong>
              </p>
            </div>
          </div>
          <div class="delete-actions">
            <button type="button" class="btn btn-secondary me-2" (click)="cancelDelete()">
              AnuleazÄƒ
            </button>
            <button type="button" class="btn btn-danger" (click)="deleteLanguageConfirmed()">
              ğŸ—‘ï¸ È˜terge definitiv
            </button>
          </div>
        </div>
      </div>

      <!-- Card pentru adÄƒugarea unei limbi noi -->
      <div class="language-admin-card add-new" (click)="showAddLanguageForm = true">
        <div class="add-icon">â•</div>
        <h4>AdaugÄƒ limbÄƒ nouÄƒ</h4>
        <p>CreeazÄƒ o limbÄƒ nouÄƒ Ã®n sistem</p>
      </div>
    </div>
  </div>

  <!-- Dashboard pentru limba selectatÄƒ -->
  <div *ngIf="selectedLanguageId" class="admin-management-dashboard">
    <!-- Header cu limba selectatÄƒ -->
    <div class="selected-language-header">
      <div class="current-language-admin">
        <span class="flag">{{getSelectedLanguage()?.flagEmoji}}</span>
        <span class="name">Administrezi: {{getSelectedLanguage()?.name}}</span>
      </div>
      <div class="language-actions">
        <button class="btn btn-outline-secondary me-2" (click)="changeLanguage()">
          ğŸ”„ SchimbÄƒ limba
        </button>
        <button class="btn btn-outline-primary" (click)="showAddLanguageForm = true">
          â• AdaugÄƒ limbÄƒ nouÄƒ
        </button>
      </div>
    </div>

    <!-- SecÈ›iuni administrare pentru limba selectatÄƒ -->
    <h3>Gestiuni pentru {{getSelectedLanguage()?.name}}</h3>
    <div class="admin-sections">
      <button [routerLink]="['/manage-levels']" [queryParams]="{languageId: selectedLanguageId}" class="admin-btn">
        ğŸ“Š Gestiune Nivele
      </button>
      <button [routerLink]="['/manage-content']" [queryParams]="{languageId: selectedLanguageId}" class="admin-btn">
        ğŸ“š Gestiune ConÈ›inut
      </button>
      <button [routerLink]="['/manage-mcq']" [queryParams]="{languageId: selectedLanguageId}" class="admin-btn">
        ğŸ§ª Gestiune Teste
      </button>
    </div>
  </div>

  <!-- Modal pentru adÄƒugarea unei limbi noi -->
  <div *ngIf="showAddLanguageForm" class="modal-overlay" (click)="cancelAdd()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>AdaugÄƒ LimbÄƒ NouÄƒ</h3>
      <form (ngSubmit)="addLanguage()">
        <div class="form-group mb-3">
          <label>Numele limbii:</label>
          <input type="text" class="form-control" [(ngModel)]="newLanguage.name"
                 name="name" placeholder="ex: English" required>
        </div>
        <div class="form-group mb-3">
          <label>Cod limbÄƒ (2-3 litere):</label>
          <input type="text" class="form-control" [(ngModel)]="newLanguage.code"
                 name="code" placeholder="ex: en" required maxlength="3">
        </div>
        <div class="form-group mb-3">
          <label>Emoji steag:</label>
          <input type="text" class="form-control" [(ngModel)]="newLanguage.flagEmoji"
                 name="flagEmoji" placeholder="ex: ğŸ‡¬ğŸ‡§" required>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary me-2">SalveazÄƒ</button>
          <button type="button" class="btn btn-secondary" (click)="cancelAdd()">AnuleazÄƒ</button>
        </div>
      </form>
    </div>
  </div>
</div>

